# 掌上公交汽车查询系统
## 软件需求规格说明书(SRS)

**项目名称：** 基于移动端的掌上公交汽车查询系统设计与实现  
**版本号：** 1.0  
**编制日期：** 2026年1月5日  
**编制者：** 学生  

---

## 1. 引言

### 1.1 编写目的
本软件需求规格说明书用于描述掌上公交汽车查询系统的功能需求、非功能需求、业务流程和技术要求，为系统设计、开发和测试提供基础。

### 1.2 项目背景
随着城市化进程的加快，公共交通已成为市民出行的首选方式。传统公交出行存在"车辆位置不透明、候车时间不可控、支付方式单一"等问题。本系统利用LBS技术和实时数据处理，为乘客提供车辆实时定位、预计到站时间和智能提醒等服务。

### 1.3 适用范围
本文档适用于系统的需求分析、系统设计、开发实现和测试验收阶段。

---

## 2. 总体描述

### 2.1 产品展望
掌上公交汽车查询系统是一个C/S架构的移动应用，包含以下主要模块：
- **客户端（App）**：基于Android/iOS的移动应用
- **服务端（Backend）**：处理业务逻辑和数据管理
- **数据库**：存储公交线路、车辆、用户等数据

### 2.2 产品功能
系统提供以下核心功能：

| 功能模块 | 主要功能 |
|---------|---------|
| 实时导乘 | 线路查询、车辆实时定位、预计到站时间计算 |
| 智能提醒 | 到站提醒、候车提醒、交通推送通知 |
| 便捷票务 | 移动支付、电子票务、二维码扫码乘车 |
| 用户管理 | 账户登录、个人信息管理、出行历史查询 |
| 数据统计 | 公交线路统计、乘车数据分析 |

### 2.3 用户特征
- **普通乘客**：使用App查询公交信息、购票乘车
- **公交公司管理员**：管理线路、车辆、驾驶员信息
- **系统管理员**：系统维护、数据管理、权限控制

### 2.4 运行环境
| 环境项 | 要求 |
|-------|------|
| 移动端 | Android 5.0+, iOS 11.0+ |
| 服务端 | Java/Python, Spring Boot框架 |
| 数据库 | MySQL 5.7+ 或 PostgreSQL 10+ |
| 地图服务 | 高德地图API / Google Maps API |
| 支付接口 | 支付宝、微信支付 |

---

## 3. 系统用例分析（面向对象方法）

### 3.1 系统参与者（Actor）

1. **普通乘客(Passenger)**
   - 查询公交线路
   - 查看车辆实时位置
   - 设置到站提醒
   - 购买车票
   - 评价出行服务

2. **公交驾驶员(Driver)**
   - 上传车辆GPS数据
   - 查看当前线路信息
   - 获取行驶指导

3. **公交管理员(Administrator)**
   - 管理公交线路
   - 管理车辆信息
   - 查看统计数据
   - 处理用户反馈

4. **系统管理员(SystemAdmin)**
   - 用户权限管理
   - 系统配置
   - 数据库维护

### 3.2 系统用例图

```
┌─────────────────────────────────────┐
│      掌上公交查询系统用例图          │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────┐  ┌──────────────┐ │
│  │ 普通乘客     │  │ 公交驾驶员   │ │
│  └──────┬──────┘  └──────┬───────┘ │
│         │                │         │
│    ┌────┴────┐      ┌────┴─────┐  │
│    │          │      │          │  │
│    ▼          ▼      ▼          ▼  │
│  ┌──────┬──────────┬──────┬────────┐│
│  │查询线│  查看实  │上传G │  查看  ││
│  │路    │  时位置  │PS数据│指导    ││
│  └──────┴──────────┴──────┴────────┘│
│    │          │      │          │  │
│  ┌─┴─────┬────┴──┐  │          │  │
│  │        ▼       │  │          │  │
│  │   ┌────────────┴──┴──────────┴─┐│
│  │   │  设置提醒、购票、评价      ││
│  │   └───────────────────────────┘│
│  │                                 │
│  │  ┌──────────────┐  ┌──────────┐│
│  │  │公交管理员    │  │系统管理员││
│  │  └──────┬───────┘  └────┬─────┘│
│  │         │               │      │
│  │    ┌────┴───┐      ┌────┴──┐   │
│  │    │         │      │       │   │
│  │    ▼         ▼      ▼       ▼   │
│  │  ┌──────────────────────────┐   │
│  │  │管理线路、车辆、权限、配置  │   │
│  │  └──────────────────────────┘   │
│  │                                 │
└──┴─────────────────────────────────┘
```

### 3.3 关键用例详细描述与活动图

#### **用例1：查询公交线路和实时位置**

**用例名称：** 查询并跟踪公交车

**参与者：** 普通乘客

**前置条件：** 用户已登录系统

**基本流程：**
1. 乘客输入出发地和目的地
2. 系统查询数据库获取相关线路
3. 系统显示可用线路列表
4. 乘客选择目标线路
5. 系统获取该线路所有车辆的实时GPS位置
6. 系统在地图上标注车辆位置并显示预计到站时间

**替代流程：**
- 若无相关线路，系统显示"无法查询"提示

**后置条件：** 乘客获得实时公交信息

**活动图：**

```
┌─────────────────────────────────────────┐
│  查询公交线路和实时位置活动图            │
├─────────────────────────────────────────┤
│                                         │
│        (开始)                           │
│          │                              │
│          ▼                              │
│     ┌─────────────┐                    │
│     │输入出发地/  │                    │
│     │目的地       │                    │
│     └──────┬──────┘                    │
│            │                           │
│            ▼                           │
│     ┌─────────────┐                    │
│     │查询相关线路  │                    │
│     └──────┬──────┘                    │
│            │                           │
│       ┌────┴────┐                      │
│       │          │                      │
│       ▼(有)     ▼(无)                   │
│    ┌────────┐  │                       │
│    │显示结果│  │                       │
│    └───┬────┘  │                       │
│        │       ▼                       │
│        │    ┌──────────┐               │
│        │    │显示提示  │               │
│        │    └─────┬────┘               │
│        │          │                    │
│    ┌───┴──────────┴──┐                │
│    │ [选择线路/重新查询]               │
│    └───────┬──────────┘                │
│            │                           │
│            ▼                           │
│    ┌──────────────┐                   │
│    │获取车辆GPS数据│                   │
│    └────────┬─────┘                   │
│             │                         │
│             ▼                         │
│    ┌──────────────────┐               │
│    │计算预计到站时间  │               │
│    └────────┬─────────┘               │
│             │                         │
│             ▼                         │
│    ┌──────────────────┐               │
│    │在地图上显示车辆  │               │
│    └────────┬─────────┘               │
│             │                         │
│             ▼                         │
│         (结束)                         │
│                                       │
└───────────────────────────────────────┘
```

#### **用例2：设置到站提醒**

**用例名称：** 设置并接收到站提醒

**参与者：** 普通乘客

**前置条件：** 乘客已选择要乘坐的公交线路和车辆

**基本流程：**
1. 乘客选择"设置提醒"功能
2. 系统显示提醒选项（到站提醒、候车提醒）
3. 乘客选择提醒方式（推送通知、短信、铃声）
4. 乘客输入目标站点
5. 系统保存提醒设置到数据库
6. 当车辆即将到站时，系统发送实时通知
7. 乘客收到提醒并可查看通知详情

**替代流程：**
- 若用户禁用通知，系统仅保存提醒但不发送推送

**后置条件：** 提醒设置已保存，系统定时检查并推送通知

**活动图：**

```
┌──────────────────────────────────────┐
│    设置到站提醒活动图                  │
├──────────────────────────────────────┤
│                                      │
│       (开始)                          │
│         │                            │
│         ▼                            │
│   ┌─────────────┐                   │
│   │选择提醒功能 │                   │
│   └──────┬──────┘                   │
│          │                          │
│          ▼                          │
│   ┌──────────────────┐              │
│   │显示提醒类型选项   │              │
│   │(到站/候车/路线)  │              │
│   └──────┬───────────┘              │
│          │                          │
│          ▼                          │
│   ┌──────────────────┐              │
│   │选择提醒方式      │              │
│   │(推送/短信/铃声)  │              │
│   └──────┬───────────┘              │
│          │                          │
│          ▼                          │
│   ┌──────────────────┐              │
│   │输入目标站点      │              │
│   └──────┬───────────┘              │
│          │                          │
│          ▼                          │
│   ┌──────────────────┐              │
│   │验证站点有效性    │              │
│   └──────┬───────────┘              │
│          │                          │
│      ┌───┴────┐                     │
│      ▼(有效)  ▼(无效)               │
│   ┌────────┐  │                     │
│   │保存提醒│  │                     │
│   │到数据库│  │                     │
│   └───┬────┘  │                     │
│       │       ▼                     │
│       │   ┌──────────┐              │
│       │   │提示重新输│              │
│       │   │入站点    │              │
│       │   └─────┬────┘              │
│       │         │                   │
│   ┌───┴─────────┴──┐                │
│   │系统监控车辆位置 │                │
│   └───────┬────────┘                │
│           │                         │
│    ┌──────┴──────┐                  │
│    ▼(车辆接近)   │                  │
│  ┌──────────┐    │                  │
│  │发送提醒  │    │                  │
│  │通知给用户│    │                  │
│  └─────┬────┘    │                  │
│        │         │                  │
│    ┌───┴─────────┴──┐               │
│    │(结束)           │               │
│    └────────────────┘               │
│                                     │
└─────────────────────────────────────┘
```

#### **用例3：购票支付**

**用例名称：** 在线购票和支付

**参与者：** 普通乘客

**前置条件：** 乘客已登录，选定了目标线路和车辆

**基本流程：**
1. 乘客选择"购票"功能
2. 系统显示票价和支付方式选项
3. 乘客选择支付方式（支付宝/微信支付）
4. 乘客确认购票信息
5. 系统调用第三方支付API
6. 用户进行支付操作
7. 支付成功后，系统生成电子车票和二维码
8. 乘客可扫码上车或出示二维码给司机扫描

**替代流程：**
- 支付失败时，系统显示错误提示，允许重新支付
- 乘客可取消购票操作

**后置条件：** 车票已生成，用户可使用车票乘车

**活动图：**

```
┌─────────────────────────────────────┐
│      购票支付流程活动图                │
├─────────────────────────────────────┤
│                                     │
│       (开始)                         │
│         │                           │
│         ▼                           │
│    ┌──────────┐                    │
│    │选择购票   │                    │
│    └────┬─────┘                    │
│         │                          │
│         ▼                          │
│    ┌──────────────────┐            │
│    │显示票价信息      │            │
│    └────┬─────────────┘            │
│         │                          │
│         ▼                          │
│    ┌──────────────────┐            │
│    │选择支付方式      │            │
│    │(支付宝/微信)     │            │
│    └────┬─────────────┘            │
│         │                          │
│         ▼                          │
│    ┌──────────────────┐            │
│    │确认购票信息      │            │
│    └────┬─────────────┘            │
│         │                          │
│    ┌────┴─────────┐                │
│    │              │                │
│    ▼(确认)       ▼(取消)           │
│  ┌──────────┐    │                 │
│  │发起支付   │    │                 │
│  └────┬─────┘    │                 │
│       │          ▼                 │
│       │      ┌──────────┐          │
│       │      │交易取消  │          │
│       │      └────┬─────┘          │
│       │           │                │
│   ┌───┴────────────┴──┐            │
│   │[支付结果]         │            │
│   └────────┬──────────┘            │
│            │                       │
│      ┌─────┴──────┐                │
│      ▼(成功)     ▼(失败)           │
│   ┌────────┐   │                   │
│   │生成车票│   │                   │
│   │和二维码│   │                   │
│   └───┬────┘   │                   │
│       │        ▼                   │
│       │   ┌────────────┐           │
│       │   │显示支付失败│           │
│       │   │提示重试    │           │
│       │   └─────┬──────┘           │
│       │         │                  │
│   ┌───┴─────────┴──┐               │
│   │(结束)           │               │
│   └────────────────┘               │
│                                    │
└────────────────────────────────────┘
```

#### **用例4：公交管理员管理线路和车辆**

**用例名称：** 公交线路和车辆信息管理

**参与者：** 公交管理员

**前置条件：** 管理员已登录系统

**基本流程：**
1. 管理员访问管理后台
2. 选择"线路管理"或"车辆管理"模块
3. 系统显示现有线路/车辆列表
4. 管理员可执行以下操作：
   - 新增线路/车辆信息（包括编号、站点、车型等）
   - 编辑现有信息（更新路线、时间表、运力等）
   - 删除已停运的线路/车辆
   - 查看实时车辆状态和行驶数据
5. 系统验证输入信息的有效性
6. 管理员确认提交后，系统保存到数据库
7. 系统记录操作日志用于审计

**替代流程：**
- 输入信息格式错误时，系统返回错误提示
- 管理员可取消操作

**后置条件：** 线路或车辆信息已更新，实时同步到客户端

**活动图：**

```
┌─────────────────────────────────────┐
│  线路和车辆管理活动图                  │
├─────────────────────────────────────┤
│                                     │
│      (开始)                          │
│        │                            │
│        ▼                            │
│   ┌──────────────┐                 │
│   │登录管理后台   │                 │
│   └────┬─────────┘                 │
│        │                           │
│        ▼                           │
│   ┌──────────────────────┐         │
│   │选择管理模块          │         │
│   │(线路管理/车辆管理)   │         │
│   └────┬────────────────┘         │
│        │                          │
│        ▼                          │
│   ┌──────────────────────┐        │
│   │显示现有列表           │        │
│   └────┬────────────────┘        │
│        │                         │
│    ┌───┴──────┬─────┬────────┐   │
│    ▼(新增)   ▼(编辑) ▼(删除) ▼(查看)
│  ┌────────┐                    │
│  │输入新信息                    │
│  └───┬────┘                    │
│      │                         │
│      ▼                         │
│  ┌────────────┐                │
│  │验证信息     │                │
│  │有效性       │                │
│  └───┬────────┘                │
│      │                         │
│  ┌───┴────┐                    │
│  ▼(有效)  ▼(无效)              │
│ ┌──────┐  │                    │
│ │确认   │  │                    │
│ │保存   │  │                    │
│ └──┬───┘  ▼                    │
│    │   ┌──────────┐            │
│    │   │显示错误  │            │
│    │   │提示      │            │
│    │   └────┬─────┘            │
│    │        │                  │
│    ▼        ▼                  │
│  ┌─────────────────┐           │
│  │保存到数据库     │           │
│  └────┬────────────┘           │
│       │                        │
│       ▼                        │
│  ┌─────────────────┐           │
│  │记录操作日志     │           │
│  └────┬────────────┘           │
│       │                        │
│       ▼                        │
│   (结束)                        │
│                                │
└────────────────────────────────┘
```

---

## 4. 功能需求详细描述

### 4.1 用户管理模块
- **注册与登录**：支持手机号/邮箱注册，密码、验证码登录
- **个人信息管理**：修改昵称、头像、联系方式
- **账户安全**：密码修改、登录历史查看、设备管理
- **注销账户**：用户可申请注销，保留订单数据180天

### 4.2 实时导乘模块
- **线路查询**：支持按关键词、收藏线路、附近线路查询
- **实时定位**：显示车辆在地图上的实时位置，更新频率≤3秒
- **预计到站时间(ETA)**：基于车速、路况、距离计算，误差<5分钟
- **线路详情**：显示线路全部站点、票价、运营时间等

### 4.3 智能提醒模块
- **到站提醒**：车辆距目标站点<1km时推送通知
- **候车提醒**：用户等车超过设定时间时提醒
- **交通警报**：路段拥堵、线路调整、停运信息推送
- **消息管理**：用户可查看历史通知，支持消息分类

### 4.4 票务支付模块
- **票价查询**：显示不同乘客类型的票价（全价/半价/免票）
- **在线购票**：选择乘车人数、座位（如可用）、下车站
- **支付接口**：支付宝、微信支付、银行卡支付、余额支付
- **电子车票**：生成二维码，支持截图、转发、复制码
- **退票申请**：乘车前支持退票，扣除手续费

### 4.5 数据统计与分析模块
- **乘车统计**：按日期、线路、站点统计乘车人数
- **用户分析**：活跃用户数、新增用户、用户留存率
- **线路评价**：显示线路平均评分、乘客评论、投诉反馈
- **收入统计**：日/周/月收入报表，支付方式分析

---

## 5. 非功能需求

### 5.1 性能需求
- **响应时间**：页面加载<2秒，API响应<500ms
- **并发处理**：支持≥10000并发用户
- **定位精度**：GPS定位精度<10米
- **数据实时性**：车辆位置实时更新，延迟<3秒

### 5.2 安全需求
- **数据加密**：传输层HTTPS/TLS 1.2+，存储层敏感数据加密
- **用户认证**：支持二次认证(2FA)，生物识别登录
- **权限管理**：基于角色的访问控制(RBAC)
- **数据隐私**：遵守GDPR等隐私法规，GPS数据脱敏存储

### 5.3 可用性需求
- **可用性**：系统可用性≥99.5%
- **故障恢复**：RTO<30分钟，RPO<5分钟
- **备份策略**：每日全量备份，每6小时增量备份
- **用户界面**：友好易用，支持深色模式，无障碍访问

### 5.4 兼容性需求
- **操作系统**：支持Android 5.0-13+, iOS 11.0-16+
- **分辨率**：适配2K及以下分辨率，响应式布局
- **网络**：支持2G/3G/4G/5G/WiFi网络环境
- **地图SDK**：兼容高德地图、Google Maps等多个地图服务商

### 5.5 可维护性需求
- **代码质量**：遵循编码规范，代码覆盖率>80%
- **日志记录**：详细业务日志，支持按级别查询
- **监控告警**：CPU、内存、数据库连接等关键指标监控
- **文档完整**：API文档、数据库设计文档、部署手册

---

## 6. 系统约束与限制

| 约束项 | 描述 |
|-------|------|
| 时间约束 | 项目开发周期12周，上线前测试≥4周 |
| 成本约束 | 云服务费用控制在10K/月以内 |
| 法律约束 | 遵守《个人信息保护法》《网络安全法》等法规 |
| 技术约束 | 不能使用过期技术，必须可扩展 |
| 硬件约束 | 用户终端存储空间需求<100MB |

---

## 7. 验收准则

- [ ] 所有功能用例均已实现并通过测试
- [ ] 非功能需求指标达到预期（性能、安全、可用性）
- [ ] 完成≥100个测试用例，通过率≥95%
- [ ] 代码覆盖率≥80%，关键路径≥95%
- [ ] 用户文档、API文档、运维手册完整
- [ ] 已通过安全漏洞扫描，无严重漏洞
- [ ] 系统可在生产环境稳定运行7天无故障

---

**文档版本历史**

| 版本 | 日期 | 修改说明 | 作者 |
|-----|------|--------|------|
| 1.0 | 2026-01-05 | 初始版本 | 学生 |

